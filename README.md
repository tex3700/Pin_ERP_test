# Pin_ERP_test

Разработан функционал "PIN_ERP" на Laravel 10 c базой данных PostgreSQL.
Готовое приложение и БД развернуты в Docker.
Дополнительно добавлена стандартная авторизация/аутентификация laravel/ui для создания и проверки ролей пользователя.

Реализована CRUD Eloquent модель "Product" связанная с таблицей "products":
    ID - uint, autoincrement
    ARTICLE - varchar(255), unique index
    NAME - varchar(255)
    STATUS - varchar(255) | (available|unavailable)
    DATA - jsonb | (кол-во полей без ограничений(можно было поставить))
     - timestamps
     - soft deletes (метод для полного удаления не добавлял)

Тестовые данные в БД добавляются через Seeders (фабрики создавать не стал):
    В таблицу 'users' добавляются 2 пользователя:
    - admin, a@a.com, role - admin
    - Иванов Иван Иванович, i@a.com, role - user
    (пароли по умолчанию - 12345678)
    В таблицу 'products' добавляется 10 товаров где каждый 3й 'status' -> 'unavailable'.

Создана роль администратора, который может редактировать артикул, остальным пользователям можно редактировать всё, кроме артикула.
Роль пользователя можно узнать из настроек (config(‘products.role’)).
Реализована валидация и проверка прав через модель User метод checkUserRole() и request валидацию StoreProductRequest.

Реалаизованы в контроллере ProductController:
    - вывод списка продуктов (метод "index");
    - просмотр карточки продукта (метод "show");
    - добавление (метод "store");
    - редактирование (методы "edit" и "update")
    - удаление продукта (метод "destroy")
Прописаны соответствующие роуты (resourse rots создавать не стал для наглядности).
Сделана валидация создания и редактирования:
NAME — обязательное поле 'required', длиной не менее 10 символов 'min:10';
ARTICLE — обязательное поле 'required', только латинские символы и цифры 'alpha_dash:ascii''alpha_dash:ascii', уникальное в таблице unique().

В модели Product реализована Local Scope для получения только доступных продуктов (STATUS = “available”),
в ProductController реализован вывод только доступных продуктов, там же закоментирован метод для вывода всех продуктов. 

При создании продукта реализована отправку на заданный в конфигурации Email (config(‘products.email’)) уведомления (Notification "ProductCreatedNotify") о том, что продукт создан.
Уведомление отправляется через задачу (Job "SendProductCreatedNotification") в очереди (Queue).
(Автоматического запуска в консоли Задач для Очередей не создавал. 
Все кромем настроек smtp (!пароль) для отправки почты перенес в env.example, 
отправку почты проверял через свой email-mail.ru, работает, отдельные сервисы подключать не стал).

Интерфейс приложения реализован соответственно макету: 
https://www.figma.com/file/pVspJcvzwZUYynT2dogGG2/PIN-ERP-ТЗ-03.02.2022-(Copy)?type=design&node-id=0-1&mode=design&t=pzPc1ZJlca6HnPL3-0

